<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Youssef Challenge Game</title>
  <style>
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #0f0f0f, #1a1a1a);
      color: white;
      text-align: center;
      padding: 20px;
    }
    .navbar {
      background: #111;
      padding: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 0 10px #0ff;
    }
    .navbar .logo {
      font-weight: bold;
      font-size: 20px;
      color: #0ff;
    }
    .player-list {
      margin: 20px 0;
    }
    .player {
      margin: 5px 0;
      font-size: 18px;
    }
    .player-card {
      background: #333;
      padding: 10px;
      margin: 10px;
      border: 2px solid #0ff;
      border-radius: 10px;
      box-shadow: 0 0 10px #0ff;
      text-align: center;
    }
    .card {
      background: #222;
      padding: 20px;
      margin: 20px auto;
      width: 320px;
      min-height: 120px;
      border-radius: 12px;
      box-shadow: 0 0 10px #0ff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }
    button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 18px;
      border-radius: 8px;
      border: 2px solid #0ff;
      background: transparent;
      color: #0ff;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background: #0ff;
      color: #111;
      box-shadow: 0 0 10px #0ff;
    }
    .hidden {
      display: none;
    }
    .gold {
      color: gold;
      font-weight: bold;
    }
    #allPlayersBox {
      margin-top: 20px;
    }
    .player-list-item {
      background: #333;
      margin: 8px 0;
      padding: 8px;
      border-radius: 8px;
      box-shadow: 0 0 8px #0ff;
    }
  </style>
  <audio id="bgMusic" src="sounds/background.mp3" loop></audio>
  <audio id="clickSound" src="sounds/click.mp3"></audio>
</head>
<body>
  <nav class="navbar">
    <div class="logo">Youssef Challenge Zone</div>
    <div class="navbar-buttons">
      <button onclick="toggleTheme(); playClickSound()">Theme</button>
      <button onclick="toggleMusic(); playClickSound()" id="musicBtn">ğŸµ Music On</button>
      <select id="languageSelect" onchange="changeLanguage(); playClickSound()">
        <option value="en">English</option>
        <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
        <option value="de">Deutsch</option>
        <option value="es">EspaÃ±ol</option>
      </select>
      <button onclick="exitGame()" style="background: darkred; color: white;">Exit</button>    </div>
    <div id="mainPlayerPoints"></div>
  </nav>
  <div class="player-list" id="playerList">
    <h3>Players</h3>
    <div id="players"></div>
    <input type="text" id="playerNameInput" placeholder="Enter player name">
    <button onclick="addPlayer()">Add Player</button>
    <button onclick="startGame()">Start Game</button>
  </div>
  <div id="gameSection" class="hidden">
    <div id="allPlayersBox" style="background: #222; padding: 10px; margin: 20px auto; width: 300px; border-radius: 10px; box-shadow: 0 0 10px #0ff;">
      <h3>Players List</h3>
      <div id="allPlayersList"></div>
    </div>
    <div id="currentPlayerBox" style="background: #222; padding: 10px; margin: 10px auto; width: 300px; border-radius: 10px; box-shadow: 0 0 10px #0ff;">
      <h2 id="currentPlayer"></h2>
      <p id="currentPlayerPoints">Points: 0</p>
    </div>
    <h3 id="currentLevel">Level 1</h3>
    <div class="card" id="challengeCard">Click "Next Challenge" to start!</div>
    <button id="nextChallengeBtn">Next Challenge</button>
    <button id="completeChallengeBtn" class="hidden">I Completed It!</button>
    <button id="skipChallengeBtn" class="hidden">Skip (-50 Points)</button>
    <button id="punishmentBtn" class="hidden" style="background: #8B0000; border: 2px solid red; color: white; box-shadow: 0 0 10px red;">ğŸ˜ˆ Ø¹Ù‚Ø§Ø¨ (-5 Ù†Ù‚Ø§Ø·)</button>
    <p id="points">Points: 0</p>
    <button id="finishGameBtn" class="hidden" style="font-size: 40px; padding: 30px 60px; background: linear-gradient(45deg, gold, orange); border: 5px solid white; border-radius: 20px; color: black; box-shadow: 0 0 20px gold; cursor: pointer;">ğŸ† Finish The Game! ğŸ†</button>
  </div>
  <script>
    document.getElementById('finishGameBtn').addEventListener('mouseenter', moveFinishButton);

function moveFinishButton() {
  const button = document.getElementById('finishGameBtn');
  const randomTop = Math.random() * 80;
  const randomLeft = Math.random() * 80;
  button.style.transform = "scale(0.7)";
  button.style.position = "fixed";
  button.style.top = `${randomTop}%`;
  button.style.left = `${randomLeft}%`;
  setTimeout(() => {
    button.style.transform = "scale(1)";
  }, 500);
}
    // (Ù‡ÙƒÙ…Ù„Ù„Ùƒ Ù‡Ù†Ø§ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø¨Ø¹Ø¯ Ù…ÙˆØ§ÙÙ‚ØªÙƒ â€” Ø¹Ø´Ø§Ù† Ù…ØªÙ‚ÙØ²Ø´ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø³Ø¨Ø¨ Ø§Ù„Ø­Ø¬Ù… Ø§Ù„ÙƒØ¨ÙŠØ±)
    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
let players = [];
let currentPlayerIndex = 0;
let challenges = []; // Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª
let goldChallenges = []; // ØªØ­Ø¯ÙŠØ§Øª Ø¬ÙˆÙ„Ø¯
let mainPlayerPoints = 0;
let currentLevel = 1;

const level1Challenges = [
  "Ù‚ÙˆÙ„ Ù†ÙƒØªØ© Ù…Ø¶Ø­ÙƒØ© ğŸ˜‚",
  "Ø§Ø¹Ù…Ù„ ØµÙˆØª Ø­ÙŠÙˆØ§Ù† Ù„Ù…Ø¯Ø© 10 Ø«ÙˆØ§Ù†ÙŠ ğŸ’",
  "Ø§Ø±Ù‚Øµ Ø±Ù‚ØµØ© ØºØ±ÙŠØ¨Ø© ğŸµ",
  "Ù‚ÙˆÙ„ Ø³Ø± Ø¹Ù† Ù†ÙØ³Ùƒ ğŸ¤«",
  "ØµÙ Ù†ÙØ³Ùƒ Ø¨ÙƒÙ„Ù…Ø© ÙˆØ§Ø­Ø¯Ø© âœ¨",
  // (ÙƒÙ…Ù„ Ø¨Ù‚ÙŠØ© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù‡Ù†Ø§ Ø²ÙŠ Ù…Ø§ Ø§ØªÙÙ‚Ù†Ø§)
];

const level1GoldChallenges = [
  "Ø¬Ø§ÙˆØ¨ Ø¨ØµØ±Ø§Ø­Ø© Ø¹Ù„Ù‰ Ø³Ø¤Ø§Ù„ Ù…Ø­Ø±Ø¬ â­",
  "ØºÙ†ÙŠ Ù…Ù‚Ø·Ø¹ Ø£ØºÙ†ÙŠØ© Ù‚Ø¯Ø§Ù… ÙƒÙ„ Ø§Ù„Ù†Ø§Ø³ â­",
  "Ø§Ø¹Ù…Ù„ ØªØ­Ø¯ÙŠ Ù…Ø¶Ø­Ùƒ Ù‚Ø¯Ø§Ù… Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ â­",
];

const punishments = [
  "Ø§Ø¹Ù…Ù„ 30 ØªÙ…Ø±ÙŠÙ† Ø¶ØºØ· Ù‚Ø¯Ø§Ù… Ø§Ù„Ø¬Ù…ÙŠØ¹",
  "Ø§ØªÙƒÙ„Ù… Ø¨ØµÙˆØª Ø·ÙÙˆÙ„ÙŠ Ù„Ø¯Ù‚ÙŠÙ‚ØªÙŠÙ†",
  "ØºÙ†ÙŠ Ø¨ØµÙˆØª Ø¹Ø§Ù„ÙŠ Ø£ØºÙ†ÙŠØ© Ù…Ø´ Ø¨ØªØ­Ø¨Ù‡Ø§",
  "Ø®Ù„ÙŠ Ø­Ø¯ ÙŠØ±Ø³Ù… Ø¹Ù„Ù‰ ÙˆØ´Ùƒ Ø±Ø³Ù…Ø© ØºØ±ÙŠØ¨Ø©",
  "Ø§Ù‚Ù„Ø¯ Ù…Ø´Ù‡Ø¯ Ø£ÙƒØ´Ù† Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø¶Ø­ÙƒØ©",
  "Ø§Ù‚Ø¹Ø¯ Ù¥ Ø¯Ù‚Ø§ÙŠÙ‚ Ø¨Ø¯ÙˆÙ† Ø­Ø±ÙƒØ©",
  "Ø§Ù‚ÙˆÙ„ Ø­Ø§Ø¬Ø© Ù…Ø­Ø±Ø¬Ø© Ø­ØµÙ„Øª Ù…Ø¹Ø§Ùƒ",
  "Ø§Ø¹Ù…Ù„ ØªÙ…Ø«ÙŠÙ„ Ù„Ù…Ø´Ù‡Ø¯ Ø­Ø²ÙŠÙ†",
  "Ø§Ø®ØªØ± Ù„Ø§Ø¹Ø¨ ÙŠØ·Ù„Ø¨ Ù…Ù†Ùƒ ØªØ­Ø¯ÙŠ Ø¬Ø¯ÙŠØ¯",
  "Ø§ØªÙƒÙ„Ù… Ø¹Ù† Ø´Ø®Øµ ØªØ­Ø¨Ù‡ ÙˆØ§Ù†Øª Ù…ÙƒØ³ÙˆÙ",
  "Ø§Ø¹Ù…Ù„ ØªØ­Ø¯ÙŠ Ø±ÙŠØ§Ø¶ÙŠ ØµØ¹Ø¨ Ø¨Ø¯ÙˆÙ† ØªÙˆÙ‚Ù",
  "ØºÙ†ÙŠ Ù…Ù‚Ø·Ø¹ Ø±Ø§Ø¨ Ø¹Ø´ÙˆØ§Ø¦ÙŠ",
  "Ø§Ø¹Ù…Ù„ Ø±Ù‚ØµØ© Ù…Ø¶Ø­ÙƒØ© Ø¬Ø¯Ø§",
  "Ø§ØªØµÙ„ Ø¨Ø­Ø¯ ÙˆØªÙ‚ÙˆÙ„Ù‡ Ø³Ø± ØºØ±ÙŠØ¨",
  "Ø§Ø¹Ù…Ù„ Ù†Ø¯Ø§Ø¡ Ù„Ø´Ø®Øµ Ø¨ØµÙˆØª Ø¹Ø§Ù„ÙŠ",
  "Ø§Ø¹Ù…Ù„ Ù¡Ù  Ù‚ÙØ²Ø§Øª Ø¹Ø§Ù„ÙŠØ©",
  "Ø§ÙƒØªØ¨ Ù‚ØµÙŠØ¯Ø© Ù…Ø¶Ø­ÙƒØ© Ø¹Ù† Ù†ÙØ³Ùƒ",
  "Ø®Ù„ÙŠ Ø´Ø®Øµ ÙŠÙƒØªØ¨ Ù„Ùƒ ØªØ­Ø¯ÙŠ Ø¬Ø¯ÙŠØ¯",
  "Ø§Ù…Ø´ÙŠ ÙÙŠ Ø®Ø· Ù…Ø³ØªÙ‚ÙŠÙ… Ù…ØºÙ…Ø¶ Ø§Ù„Ø¹ÙŠÙ†ÙŠÙ†",
  "Ø§Ù‚Ù„Ø¯ Ø£ØºØ±Ø¨ ØµÙˆØª Ø­ÙŠÙˆØ§Ù† ØªÙ‚Ø¯Ø± Ø¹Ù„ÙŠÙ‡",
  "Ø§Ø±Ø³Ù… Ø±Ø³Ù…Ø© Ù…Ø¶Ø­ÙƒØ© Ø¹Ù† Ø­ÙŠØ§ØªÙƒ",
  "Ø§ØªØ¸Ø§Ù‡Ø± Ø§Ù†Ùƒ Ù…Ø´ ÙØ§Ù‡Ù… Ø­Ø§Ø¬Ø© Ù„Ù…Ø¯Ø© Ø¯Ù‚ÙŠÙ‚Ø©",
  "Ø§ØªÙƒÙ„Ù… Ø¹Ù† Ø£ÙƒØ«Ø± Ù…ÙˆÙ‚Ù Ø®ÙˆÙÙƒ",
  "Ø§ØªØ­Ø¯Ù‰ Ù†ÙØ³Ùƒ Ø§Ù†Ùƒ Ù…Ø§ØªØ¶Ø­ÙƒØ´ Ø¯Ù‚ÙŠÙ‚Ø©",
  "Ø§Ø¹Ù…Ù„ ØªØ­Ø¯ÙŠ Ø£ÙƒÙ„ Ø¨Ø³ÙŠØ·",
  "Ù‚ÙˆÙ„ Ù£ Ù…ÙˆØ§Ù‚Ù Ù…Ø­Ø±Ø¬Ø© Ø­ØµÙ„Øª Ù…Ø¹Ø§Ùƒ",
  "Ø§Ø±Ù‚Øµ Ø±Ù‚ØµØ© Ù…Ø´Ù‡ÙˆØ±Ø© Ø¬Ø¯Ø§ Ø¨Ø·Ø±ÙŠÙ‚Ø© ÙØ§Ø´Ù„Ø©",
  "Ø§Ø­ÙƒÙŠ Ø£ÙƒØªØ± Ø³Ø± ÙƒÙ†Øª Ù…Ø®Ø¨ÙŠÙ‡",
  "Ø§Ø¹Ù…Ù„ ØªØ­Ø¯ÙŠ Ø§Ù„ØºÙ…Ø²Ø© Ø¨Ø¯ÙˆÙ† ÙƒÙ„Ø§Ù…",
  "Ø§ØªØ¸Ø§Ù‡Ø± Ø§Ù†Ùƒ Ù…Ø°ÙŠØ¹ Ø£Ø®Ø¨Ø§Ø± Ù„Ù…Ø¯Ø© Ø¯Ù‚ÙŠÙ‚Ø©",
  "Ø§ØºÙ†ÙŠ Ø¨Ø¯ÙˆÙ† Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ù‚Ø¯Ø§Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†",
  "Ø§Ù‚Ù„Ø¯ Ø´Ø®ØµÙŠØªÙŠÙ† Ù…Ø´Ù‡ÙˆØ±ØªÙŠÙ† Ù…Ø¹ Ø¨Ø¹Ø¶",
  "Ø§Ø¹Ù…Ù„ Ù…Ø´Ù‡Ø¯ Ø¯Ø±Ø§Ù…ÙŠ Ø¹Ø´ÙˆØ§Ø¦ÙŠ",
  "Ø§Ø¹Ù…Ù„ Ù…Ø´Ù‡Ø¯ Ù‚ØªØ§Ù„ ÙˆÙ‡Ù…ÙŠ",
  "Ø®Ù„ÙŠÙƒ ØµØ§Ù…Øª Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ§Ù†Øª Ø¨ØªÙ…Ø«Ù„ Ù…Ø´Ù‡Ø¯",
  "Ø§Ø¹Ù…Ù„ Ù…Ø´Ù‡Ø¯ Ø®ÙŠØ§Ù„ Ø¹Ù„Ù…ÙŠ ØµØºÙŠØ±",
  "Ù‚ÙˆÙ„ Ù†ÙƒØªØ© Ø³Ø®ÙŠÙØ© Ø¬Ø¯Ø§",
  "Ø§Ø¹Ù…Ù„ Ù…Ø´Ù‡Ø¯ ØªÙ…Ø«ÙŠÙ„ÙŠ Ù…Ø¹ Ù„Ø§Ø¹Ø¨ Ø¢Ø®Ø±",
  "Ø§Ø±Ø³Ù… Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø¹Ø§Ù„Ù… Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø©",
  "Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© Ø­Ø¨ Ù…Ø¶Ø­ÙƒØ© Ù„Ø´Ø®Øµ ÙˆÙ‡Ù…ÙŠ",
  "Ø§Ø¹Ù…Ù„ Ù…Ø´Ù‡Ø¯ Ø§Ø¹Ù„Ø§Ù† Ù…Ù†ØªØ¬ ÙˆÙ‡Ù…ÙŠ",
  "Ø­Ø§ÙˆÙ„ ØªØ±Ù‚Øµ Ø¨Ø¯ÙˆÙ† Ù…Ø§ ØªØ­Ø±Ùƒ Ø±Ø¬Ù„Ùƒ",
  "Ù‚Ù„Ø¯ Ø£ÙƒØªØ± Ø­Ø±ÙƒØ© Ø¨ØªÙ…ÙŠØ²Ùƒ",
  "Ø§ØµØ±Ø® ÙƒÙ„Ù…Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© ÙØ¬Ø£Ø©",
  "Ø§ØªØµØ±Ù ÙƒØ£Ù†Ùƒ Ø¨Ø·Ù„ ÙÙŠÙ„Ù… Ø±Ø¹Ø¨",
  "Ø§Ø¹Ù…Ù„ Ø¯ÙˆØ± Ù…Ù‡Ø±Ø¬ Ù„Ù…Ø¯Ø© Ø¯Ù‚ÙŠÙ‚Ø©",
  "Ø§Ø¹Ù…Ù„ ØªÙ…Ø«ÙŠÙ„ Ù„Ù‡Ø¯Ù ÙƒØ±ÙˆÙŠ Ø¹Ø¸ÙŠÙ…",
  "Ø§ØªØ¸Ø§Ù‡Ø± Ø§Ù†Ùƒ Ù„Ø§Ø¹Ø¨ Ø³ÙŠØ±Ùƒ Ù…Ø­ØªØ±Ù",
  "Ø§Ø­ÙƒÙŠ Ø¹Ù† Ø£ÙƒØ«Ø± Ø­Ù„Ù… ØºØ±ÙŠØ¨ Ø´ÙˆÙØªÙ‡"
];

function generatePunishmentReward() {
  const rand = Math.random();
  if (rand < 0.005) return 100; // 0.5% ÙØ±ØµØ©
  if (rand < 0.015) return 50;  // 1% ÙØ±ØµØ©
  if (rand < 0.035) return 20;  // 2% ÙØ±ØµØ©
  if (rand < 0.065) return 10;  // 3% ÙØ±ØµØ©
  if (rand < 0.115) return 5;   // 5% ÙØ±ØµØ©
  if (rand < 0.195) return 4;   // 8% ÙØ±ØµØ©
  if (rand < 0.295) return 3;   // 10% ÙØ±ØµØ©
  if (rand < 0.495) return 2;   // 20% ÙØ±ØµØ©
  return 1; // 50% ÙØ±ØµØ©
}

function addPlayer() {
  const name = document.getElementById('playerNameInput').value.trim();
  if (name) {
    players.push({ name: name, points: 0 });
    updatePlayers();
    updateAllPlayersList();
    document.getElementById('playerNameInput').value = '';
  }
}

function updatePlayers() {
  const playersDiv = document.getElementById('players');
  playersDiv.innerHTML = '';
  players.forEach((player, index) => {
    const card = document.createElement('div');
    card.className = 'player-card';
    card.innerHTML = `<strong>${player.name}</strong><br>Points: ${player.points}`;
    playersDiv.appendChild(card);
  });
}

function updateAllPlayersList() {
  const allPlayersDiv = document.getElementById('allPlayersList');
  allPlayersDiv.innerHTML = '';
  players.forEach(player => {
    const item = document.createElement('div');
    item.className = 'player-list-item';
    item.innerHTML = `<strong>${player.name}</strong> - ${player.points} pts`;
    allPlayersDiv.appendChild(item);
  });
}

function updateCurrentPlayerInfo() {
  document.getElementById('currentPlayer').textContent = players[currentPlayerIndex].name;
  document.getElementById('currentPlayerPoints').textContent = `Points: ${players[currentPlayerIndex].points}`;
}

function startGame() {
  if (players.length === 0) return;
  document.getElementById('playerList').classList.add('hidden');
  document.getElementById('gameSection').classList.remove('hidden');
  updateCurrentPlayerInfo();
  challenges = [...level1Challenges];
  goldChallenges = [...level1GoldChallenges];
  updateMainPoints();
  updateAllPlayersList();
}

function updateMainPoints() {
  document.getElementById('mainPlayerPoints').textContent = `â­ Main Player Points: ${mainPlayerPoints}`;
}

document.getElementById('nextChallengeBtn').addEventListener('click', () => {
  let isGold = Math.random() <= 0.15; // Ù†Ø³Ø¨Ø© Ø§Ù„Ø¬ÙˆÙ„Ø¯ 15%
  let challengeText = '';

  if (isGold && goldChallenges.length > 0) {
    const idx = Math.floor(Math.random() * goldChallenges.length);
    challengeText = goldChallenges[idx];
    challengeCard.innerHTML = `<span class='gold'>${challengeText}</span>`;
  } else if (challenges.length > 0) {
    const idx = Math.floor(Math.random() * challenges.length);
    challengeText = challenges[idx];
    challengeCard.innerText = challengeText;
  } else {
    challengeCard.innerText = "No more challenges!";
  }

  document.getElementById('nextChallengeBtn').classList.add('hidden');
  document.getElementById('completeChallengeBtn').classList.remove('hidden');
  document.getElementById('skipChallengeBtn').classList.remove('hidden');
  document.getElementById('punishmentBtn').classList.remove('hidden');
});

document.getElementById('completeChallengeBtn').addEventListener('click', () => {
  handleChallengeCompletion(true);
});

document.getElementById('skipChallengeBtn').addEventListener('click', () => {
  handleChallengeCompletion(false);
});

document.getElementById('punishmentBtn').addEventListener('click', () => {
  handlePunishment();
});

function handleChallengeCompletion(completed) {
  if (completed) {
    let text = document.getElementById('challengeCard').innerText;
    let isGold = text.includes('â­');
    let pointsEarned = 0;

    if (isGold) {
      players[currentPlayerIndex].points += 15;
      mainPlayerPoints += 2;
      pointsEarned = 15;
    } else {
      players[currentPlayerIndex].points += 1;
      mainPlayerPoints += 2;
      pointsEarned = 1;
    }

    showRewardBubble(pointsEarned);

    nextTurn();
    updateCurrentPlayerInfo();
  } else {
    if (players[currentPlayerIndex].points >= 50) {
      players[currentPlayerIndex].points -= 50;
      nextTurn();
      updateCurrentPlayerInfo();
    } else {
      alert("Ù…Ø§ÙŠÙ†ÙØ¹Ø´ ØªØªØ®Ø·Ù‰ Ø§Ù„ØªØ­Ø¯ÙŠ! Ø§Ù†Øª Ù…Ø¹Ù†Ø¯ÙƒØ´ Ù†Ù‚Ø§Ø· ÙƒÙØ§ÙŠØ© Ù„Ø§Ø²Ù… ØªØ¹Ù…Ù„ Ø§Ù„ØªØ­Ø¯ÙŠ!");
    }
  }
}

function handlePunishment() {
  if (players[currentPlayerIndex].points >= 5) {
    players[currentPlayerIndex].points -= 5;
  } else {
    players[currentPlayerIndex].points = 0;
  }

  const punishment = punishments[Math.floor(Math.random() * punishments.length)];
  alert(`ğŸ˜ˆ Ø¹Ù‚Ø§Ø¨Ùƒ Ù‡Ùˆ:\n${punishment}\nÙ†ÙØ°Ù‡ Ø§Ù„Ø¢Ù†!`);

  // Ø¨Ø¹Ø¯ ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù‚Ø§Ø¨ ÙŠØ­Ø³Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·
  setTimeout(() => {
    const reward = generatePunishmentReward();
    players[currentPlayerIndex].points += reward;
    showRewardBubble(reward);

    nextTurn();
    updateCurrentPlayerInfo();
    updateAllPlayersList();
    updateMainPoints();
  }, 2000); // Ø§Ù†ØªØ¸Ø§Ø± Ø«Ø§Ù†ÙŠØªÙŠÙ† ÙˆÙƒØ£Ù† Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù†ÙØ° Ø§Ù„Ø¹Ù‚Ø§Ø¨
}

function showRewardBubble(points) {
  const bubble = document.createElement('div');
  bubble.textContent = `+${points} pts`;
  bubble.style.position = 'fixed';
  bubble.style.top = (Math.random() * 50 + 25) + '%';
  bubble.style.left = (Math.random() * 50 + 25) + '%';
  bubble.style.background = 'rgba(255, 215, 0, 0.9)';
  bubble.style.color = '#000';
  bubble.style.padding = '10px 20px';
  bubble.style.borderRadius = '20px';
  bubble.style.fontSize = '20px';
  bubble.style.boxShadow = '0 0 10px gold';
  bubble.style.zIndex = '1000';
  bubble.style.opacity = '1';
  bubble.style.transition = 'all 1s ease-out';
  document.body.appendChild(bubble);

  setTimeout(() => {
    bubble.style.transform = 'scale(1.5)';
    bubble.style.opacity = '0';
  }, 100);

  setTimeout(() => {
    bubble.remove();
  }, 1200);
}

function nextTurn() {
  currentPlayerIndex = (currentPlayerIndex + 1) % players.length;
  updateCurrentPlayerInfo();
  updatePlayers();
  updateAllPlayersList();
  updateMainPoints();
  document.getElementById('completeChallengeBtn').classList.add('hidden');
  document.getElementById('skipChallengeBtn').classList.add('hidden');
  document.getElementById('punishmentBtn').classList.add('hidden');
  document.getElementById('nextChallengeBtn').classList.remove('hidden');
  document.getElementById('challengeCard').innerText = "Click 'Next Challenge' to start!";
  
  checkLevelUp();
}

function checkLevelUp() {
  const totalPoints = players.reduce((sum, player) => sum + player.points, 0);

  if (totalPoints >= 150 && currentLevel === 1) {
    setTimeout(() => {
      if (confirm("Ù…Ø¬Ù…ÙˆØ¹ Ù†Ù‚Ø§Ø· ÙƒÙ„ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙˆØµÙ„ 150! Ø¹Ø§ÙŠØ²ÙŠÙ† ØªØ¯Ø®Ù„ÙˆØ§ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ§Ù†ÙŠØ©ØŸ")) {
        currentLevel++;
        document.getElementById('currentLevel').textContent = `Level ${currentLevel}`;

        // ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ù†ÙŠÙˆÙ† Ø¥Ù„Ù‰ Ø£Ø­Ù…Ø±
        document.querySelectorAll('.card, .player-card, .player-list-item, #currentPlayerBox, #allPlayersBox').forEach(el => {
          el.style.boxShadow = "0 0 10px red";
          el.style.border = "2px solid red";
        });

        // ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©
        challenges = [
          "Ø§Ø¹Ù…Ù„ ÙÙŠØ¯ÙŠÙˆ Ù‚ØµÙŠØ± Ø¨ØªØºÙ†ÙŠ ÙÙŠÙ‡ ğŸ¤",
          "Ù‚ÙˆÙ„ Ù…ÙˆÙ‚Ù Ù…Ø­Ø±Ø¬ Ø­ØµÙ„ Ù…Ø¹Ø§Ùƒ ğŸ¤­",
          "Ø§Ø¹Ù…Ù„ Ø­Ø±ÙƒØ© Ø±ÙŠØ§Ø¶ÙŠØ© Ù„Ù…Ø¯Ø© 20 Ø«Ø§Ù†ÙŠØ© ğŸ‹ï¸â€â™‚ï¸",
          "Ù‚ÙˆÙ„ Ø£ÙƒØªØ± Ø­Ø§Ø¬Ø© Ø¨ØªØ®Ø§Ù Ù…Ù†Ù‡Ø§ ğŸ˜±",
          "Ø§Ø±Ù‚Øµ Ø±Ù‚ØµØ© Ù…Ø¬Ù†ÙˆÙ†Ø© Ù„Ù…Ø¯Ø© Ø¯Ù‚ÙŠÙ‚Ø© ÙƒØ§Ù…Ù„Ø© ğŸ’ƒ",
          "Ø¬Ø§ÙˆØ¨ Ø¹Ù„Ù‰ Ø³Ø¤Ø§Ù„ ØµØ¹Ø¨ Ø¨Ø¯ÙˆÙ† ØªØ±Ø¯Ø¯ âš¡",
          "Ù‚Ù„Ø¯ Ø´Ø®ØµÙŠØ© Ù…Ø´Ù‡ÙˆØ±Ø© Ù‚Ø¯Ø§Ù… Ø§Ù„ÙƒÙ„ ğŸ˜‚",
          "Ø§Ø­ÙƒÙŠ Ø¹Ù† Ø³Ø± Ø¹Ù…Ø±Ùƒ Ù…Ø§ Ù‚Ù„ØªÙ‡ Ù„Ø­Ø¯ ğŸ¤",
          "Ø§Ø¹Ù…Ù„ Ø­Ø±ÙƒØ© Ø¨Ù‡Ù„ÙˆØ§Ù†ÙŠØ© Ù„Ùˆ ØªÙ‚Ø¯Ø± ğŸ¤¸â€â™‚ï¸",
          "ØºÙ†ÙŠ Ø£ØºÙ†ÙŠØ© Ø¨Ø¯ÙˆÙ† Ù„Ø­Ù† ğŸ¶",
        ];

        goldChallenges = [
          "ØªØ­Ø¯ÙŠ Ø¬ÙˆÙ„Ø¯: Ø§Ø¹Ù…Ù„ Ø¨Ø« Ù…Ø¨Ø§Ø´Ø± Ø¯Ù‚ÙŠÙ‚Ø© â­",
          "ØªØ­Ø¯ÙŠ Ø¬ÙˆÙ„Ø¯: Ù‚ÙˆÙ„ Ø­Ø§Ø¬Ø© ØªØ­Ø±Ø¬ Ù†ÙØ³Ùƒ Ø¨ÙŠÙ‡Ø§ â­",
          "ØªØ­Ø¯ÙŠ Ø¬ÙˆÙ„Ø¯: Ø§Ø±ÙƒØ¶ Ù…ÙƒØ§Ù†Ùƒ 30 Ø«Ø§Ù†ÙŠØ© Ø¨Ø£Ù‚ØµÙ‰ Ø³Ø±Ø¹Ø© â­",
        ];
      }
    }, 100);
  } else if (totalPoints >= 300 && currentLevel === 2) {
    setTimeout(() => {
      if (confirm("Ù…Ø¬Ù…ÙˆØ¹ Ù†Ù‚Ø§Ø· ÙƒÙ„ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙˆØµÙ„ 300! Ø¹Ø§ÙŠØ²ÙŠÙ† ØªØ¯Ø®Ù„ÙˆØ§ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ§Ù„ØªØ©ØŸ")) {
        currentLevel++;
        document.getElementById('currentLevel').textContent = `Level ${currentLevel}`;

        // ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ù†ÙŠÙˆÙ† Ø¥Ù„Ù‰ Ø¬ÙˆÙ„Ø¯
        document.querySelectorAll('.card, .player-card, .player-list-item, #currentPlayerBox, #allPlayersBox').forEach(el => {
          el.style.boxShadow = "0 0 10px gold";
          el.style.border = "2px solid gold";
        });

        // ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©
        challenges = [
          "Ø§ØªÙƒÙ„Ù… Ù‚Ø¯Ø§Ù… Ø§Ù„Ø¬Ù…ÙŠØ¹ Ø¹Ù† Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ Ù…Ø­Ø±Ø¬ Ù…Ø± Ø¹Ù„ÙŠÙƒ ğŸ˜…",
          "Ø§Ø¹Ù…Ù„ ÙÙŠØ¯ÙŠÙˆ ÙˆØªÙ‚Ù„ÙŠØ¯ Ù…Ø´Ù‡ÙˆØ± ÙˆØªØ´Ø§Ø±ÙƒÙ‡ Ù…Ø¹ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ÙŠÙ† ğŸ˜‚",
          "Ø§Ø±Ù‚Øµ Ø±Ù‚ØµØ© Ù…Ø¬Ù†ÙˆÙ†Ø© ÙˆØ³Ø· Ø§Ù„ØºØ±ÙØ© ğŸ’ƒğŸ”¥",
          "Ø§ØªØµÙ„ Ø¨ØµØ¯ÙŠÙ‚ ÙˆÙ‚Ù„ Ù„Ù‡ Ø³Ø± ØºØ±ÙŠØ¨ Ø¹Ù†Ùƒ ğŸ“ğŸ¤",
          "Ù‚Ù„Ø¯ ØµÙˆØª Ø´Ø®ØµÙŠØ© ÙƒØ±ØªÙˆÙ†ÙŠØ© Ù…Ø´Ù‡ÙˆØ±Ø© ğŸ¤",
          "Ø¬Ø§ÙˆØ¨ Ø¨ÙƒÙ„ ØµØ±Ø§Ø­Ø©: Ø£ÙƒØ¨Ø± Ø®Ø·Ø£ Ø§Ø±ØªÙƒØ¨ØªÙ‡ØŸ ğŸ¤”",
          "ØºÙ†ÙŠ Ø£ØºÙ†ÙŠØ© Ø¨Ø·Ø±ÙŠÙ‚Ø© ÙƒÙˆÙ…ÙŠØ¯ÙŠØ© ØªÙ…Ø§Ù…Ø§Ù‹ ğŸ˜‚",
          "Ø§Ø­ÙƒÙŠ Ø¹Ù† Ù…ÙˆÙ‚Ù Ù…Ø­Ø±Ø¬ Ø¬Ø¯Ø§Ù‹ Ø­ØµÙ„ Ù…Ø¹Ø§Ùƒ ÙØ¬Ø£Ø© ğŸ˜³",
          "Ø§Ø¹Ù…Ù„ ØªØ­Ø¯ÙŠ Ø¨Ù‡Ù„ÙˆØ§Ù†ÙŠ ØµØ¹Ø¨ Ø£Ùˆ Ø­Ø§ÙˆÙ„ ğŸ¤¸â€â™‚ï¸",
          "Ø§ØªÙƒÙ„Ù… Ø¹Ù† Ø£ÙƒØ«Ø± Ø´Ø®Øµ ØªØ­Ø¨Ù‡ ÙÙŠ Ø­ÙŠØ§ØªÙƒ â¤ï¸",
        ];

        goldChallenges = [
          "ØªØ­Ø¯ÙŠ Ø¬ÙˆÙ„Ø¯: Ù‚ÙˆÙ„ Ø£ØµØ¹Ø¨ Ø³Ø± ÙÙŠ Ø­ÙŠØ§ØªÙƒ â­",
          "ØªØ­Ø¯ÙŠ Ø¬ÙˆÙ„Ø¯: Ø£Ø¹Ù…Ù„ ÙÙŠØ¯ÙŠÙˆ Ø¨ØªØºÙ†ÙŠ Ø£ØºÙ†ÙŠØ© Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ© â­",
          "ØªØ­Ø¯ÙŠ Ø¬ÙˆÙ„Ø¯: Ø§Ù‚Ù„Ø¯ Ù…Ø´Ù‡Ø¯ Ù…Ù† ÙÙŠÙ„Ù… Ù…Ø´Ù‡ÙˆØ± â­",
        ];
      }
    }, 100);
  } else if (totalPoints >= 380 && currentLevel === 3) {
    setTimeout(() => {
      if (confirm("Ù…Ø¬Ù…ÙˆØ¹ Ù†Ù‚Ø§Ø· ÙƒÙ„ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙˆØµÙ„ 380! Ø¬Ø§Ù‡Ø²ÙŠÙ† Ù„Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø© Ø§Ù„Ù…Ø¬Ù†ÙˆÙ†Ø©ØŸ ğŸš€")) {
        currentLevel++;
        document.getElementById('currentLevel').textContent = `Level ${currentLevel}`;

        // Ø£Ù„ÙˆØ§Ù† Ù†ÙŠÙˆÙ† Ù…ØªØ­Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©
        document.querySelectorAll('.card, .player-card, .player-list-item, #currentPlayerBox, #allPlayersBox').forEach(el => {
          el.style.animation = "neonPulse 2s infinite alternate";
          el.style.border = "2px solid cyan";
          el.style.boxShadow = "0 0 20px cyan, 0 0 40px magenta, 0 0 60px yellow";
        });

        const style = document.createElement('style');
        style.innerHTML = `
          @keyframes neonPulse {
            0% {
              box-shadow: 0 0 10px cyan, 0 0 20px magenta, 0 0 30px yellow;
            }
            100% {
              box-shadow: 0 0 20px magenta, 0 0 30px yellow, 0 0 40px cyan;
            }
          }
        `;
        document.head.appendChild(style);

        // ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©
        challenges = [
          "ÙƒÙ„ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙŠØ¹Ù…Ù„ÙˆØ§ Ø±Ù‚ØµØ© Ø¬Ù…Ø§Ø¹ÙŠØ© Ù…Ø¶Ø­ÙƒØ© Ù…Ø¹Ù‹Ø§ ğŸ˜‚",
          "ÙƒÙ„ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙŠÙ‚Ù„Ø¯ÙˆØ§ Ø£ØºØ±Ø¨ Ø´Ø®ØµÙŠØ© ÙƒØ±ØªÙˆÙ†ÙŠØ© Ù…Ø¹Ù‹Ø§ ğŸ­",
          "ÙŠØ¹Ù…Ù„ÙˆØ§ ØªØ­Ø¯ÙŠ ØªÙ…Ø«ÙŠÙ„ ÙÙŠÙ„Ù… Ø£ÙƒØ´Ù† Ù…Ø¹ Ø¨Ø¹Ø¶ ğŸ¬",
          "ÙŠØºÙ†ÙˆØ§ Ø£ØºÙ†ÙŠØ© Ù…Ø´Ù‡ÙˆØ±Ø© Ø¨Ø·Ø±ÙŠÙ‚Ø© ØºØ±ÙŠØ¨Ø© Ù…Ø¹Ù‹Ø§ ğŸ¤",
          "ÙŠØ±Ø³Ù…ÙˆØ§ Ø¨Ø¹Ø¶Ù‡Ù… Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø¶Ø­ÙƒØ© ÙˆÙŠØ±ÙˆÙ‡Ø§ Ù„Ù„Ø¬Ù…ÙŠØ¹ ğŸ¨",
          "ÙŠØ¹Ù…Ù„ÙˆØ§ ØªØ­Ø¯ÙŠ Ø±ÙŠØ§Ø¶ÙŠ Ø¬Ù…Ø§Ø¹ÙŠ: 10 Ø¶ØºØ· + 10 Ù‚ÙØ²Ø§Øª ğŸ‹ï¸â€â™‚ï¸",
          "ÙƒÙ„ ÙˆØ§Ø­Ø¯ ÙŠÙ…Ø«Ù„ Ø®ÙˆÙÙ‡ Ø§Ù„Ø£ÙƒØ¨Ø± ğŸ˜±",
          "Ø¹Ù…Ù„ Ø¥Ø¹Ù„Ø§Ù† Ù…Ø¬Ù†ÙˆÙ† Ù„Ù…Ù†ØªØ¬ ÙˆÙ‡Ù…ÙŠ ğŸ¥",
          "Ø§Ù„ÙƒÙ„ ÙŠÙ‚Ù„Ø¯ Ø´Ø®ØµÙŠØ© Ù…Ø¹Ø±ÙˆÙØ© Ø¨Ø³ Ø¨Ø£Ø³Ù„ÙˆØ¨ ØºØ±ÙŠØ¨ ğŸ˜‚",
          "ÙŠØ±Ø³Ù…ÙˆØ§ Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø¹Ø§Ù„Ù… Ø¨Ø¯ÙˆÙ† Ù…Ø§ ÙŠØ´ÙˆÙÙˆØ§ ğŸ˜…",
        ];

        goldChallenges = [
          "ØªØ­Ø¯ÙŠ Ø¬ÙˆÙ„Ø¯ Ø¬Ù…Ø§Ø¹ÙŠ: ÙŠØ¹Ù…Ù„ÙˆØ§ Ù…Ø´Ù‡Ø¯ ØªÙ…Ø«ÙŠÙ„ÙŠ Ù„ÙÙŠÙ„Ù… Ø±Ø¹Ø¨ â­",
          "ØªØ­Ø¯ÙŠ Ø¬ÙˆÙ„Ø¯ Ø¬Ù…Ø§Ø¹ÙŠ: ÙŠØ­ÙƒÙˆØ§ Ù‚ØµØ© ÙˆÙ‡Ù…ÙŠØ© Ù…Ø±Ø¹Ø¨Ø© â­",
          "ØªØ­Ø¯ÙŠ Ø¬ÙˆÙ„Ø¯ Ø¬Ù…Ø§Ø¹ÙŠ: ÙŠØªØ¸Ø§Ù‡Ø±ÙˆØ§ Ø£Ù†Ù‡Ù… Ø±ÙˆØ¨ÙˆØªØ§Øª Ù„Ù…Ø¯Ø© Ø¯Ù‚ÙŠÙ‚Ø© â­",
        ];
      }
    }, 100);
  } else if (totalPoints >= 500 && currentLevel === 4) {
    document.getElementById('finishGameBtn').classList.remove('hidden');

    setTimeout(() => {
      document.getElementById('finishGameBtn').classList.add('hidden');
      showFinalGroupChallenge();
    }, 45000); // Ø¨Ø¹Ø¯ 45 Ø«Ø§Ù†ÙŠØ©
  }
}
// Ø²Ø±Ø§Ø± Ø§Ù„Ù†Ù‡Ø§ÙŠØ© ÙˆØªØ­Ø±ÙŠÙƒÙ‡
// ---------- Handlers for Game Finish ----------
// Ø²Ø±Ø§Ø± Ø§Ù„Ù†Ù‡Ø§ÙŠØ© ÙˆØªØ­Ø±ÙŠÙƒÙ‡ (Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·)
document.getElementById('finishGameBtn').addEventListener('mouseenter', moveFinishButton);

// ---------- Level Up Logic ----------
/**
 * Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙ‚Ø¯Ù… ÙÙŠ Ø§Ù„Ù…Ø±Ø§Ø­Ù„ ÙˆØ¹Ø±Ø¶ Ø²Ø± Ø§Ù„Ù†Ù‡Ø§ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
 * - 150 Ù†Ù‚Ø·Ø© â” Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2
 * - 300 Ù†Ù‚Ø·Ø© â” Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3
 * - 380 Ù†Ù‚Ø·Ø© â” Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4
 * - 500 Ù†Ù‚Ø·Ø© â” Ø²Ø±Ø§Ø± Ø§Ù„Ù†Ù‡Ø§ÙŠØ©
 */
function checkLevelUp() {
  const totalPoints = players.reduce((sum, player) => sum + player.points, 0);

  // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ø¹Ù†Ø¯ 150 Ù†Ù‚Ø·Ø©
  if (totalPoints >= 150 && currentLevel === 1) {
    setTimeout(() => {
      if (confirm("Ù…Ø¬Ù…ÙˆØ¹ Ù†Ù‚Ø§Ø· ÙƒÙ„ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙˆØµÙ„ 150! Ø¹Ø§ÙŠØ²ÙŠÙ† ØªØ¯Ø®Ù„ÙˆØ§ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ§Ù†ÙŠØ©ØŸ")) {
        currentLevel++;
        document.getElementById('currentLevel').textContent = `Level ${currentLevel}`;
        // ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ù†ÙŠÙˆÙ† Ø¥Ù„Ù‰ Ø£Ø­Ù…Ø±
        document.querySelectorAll('.card, .player-card, .player-list-item, #currentPlayerBox, #allPlayersBox').forEach(el => {
          el.style.boxShadow = "0 0 10px red";
          el.style.border = "2px solid red";
        });
        // ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©
        challenges = [
          "Ø§Ø¹Ù…Ù„ ÙÙŠØ¯ÙŠÙˆ Ù‚ØµÙŠØ± Ø¨ØªØºÙ†ÙŠ ÙÙŠÙ‡ ğŸ¤",
          "Ù‚ÙˆÙ„ Ù…ÙˆÙ‚Ù Ù…Ø­Ø±Ø¬ Ø­ØµÙ„ Ù…Ø¹Ø§Ùƒ ğŸ¤­",
          "Ø§Ø¹Ù…Ù„ Ø­Ø±ÙƒØ© Ø±ÙŠØ§Ø¶ÙŠØ© Ù„Ù…Ø¯Ø© 20 Ø«Ø§Ù†ÙŠØ© ğŸ‹ï¸â€â™‚ï¸",
          "Ù‚ÙˆÙ„ Ø£ÙƒØªØ± Ø­Ø§Ø¬Ø© Ø¨ØªØ®Ø§Ù Ù…Ù†Ù‡Ø§ ğŸ˜±",
          "Ø§Ø±Ù‚Øµ Ø±Ù‚ØµØ© Ù…Ø¬Ù†ÙˆÙ†Ø© Ù„Ù…Ø¯Ø© Ø¯Ù‚ÙŠÙ‚Ø© ÙƒØ§Ù…Ù„Ø© ğŸ’ƒ",
          "Ø¬Ø§ÙˆØ¨ Ø¹Ù„Ù‰ Ø³Ø¤Ø§Ù„ ØµØ¹Ø¨ Ø¨Ø¯ÙˆÙ† ØªØ±Ø¯Ø¯ âš¡",
          "Ù‚Ù„Ø¯ Ø´Ø®ØµÙŠØ© Ù…Ø´Ù‡ÙˆØ±Ø© Ù‚Ø¯Ø§Ù… Ø§Ù„ÙƒÙ„ ğŸ˜‚",
          "Ø§Ø­ÙƒÙŠ Ø¹Ù† Ø³Ø± Ø¹Ù…Ø±Ùƒ Ù…Ø§ Ù‚Ù„ØªÙ‡ Ù„Ø­Ø¯ ğŸ¤",
          "Ø§Ø¹Ù…Ù„ Ø­Ø±ÙƒØ© Ø¨Ù‡Ù„ÙˆØ§Ù†ÙŠØ© Ù„Ùˆ ØªÙ‚Ø¯Ø± ğŸ¤¸â€â™‚ï¸",
          "ØºÙ†ÙŠ Ø£ØºÙ†ÙŠØ© Ø¨Ø¯ÙˆÙ† Ù„Ø­Ù† ğŸ¶",
        ];
        goldChallenges = [
          "ØªØ­Ø¯ÙŠ Ø¬ÙˆÙ„Ø¯: Ø§Ø¹Ù…Ù„ Ø¨Ø« Ù…Ø¨Ø§Ø´Ø± Ø¯Ù‚ÙŠÙ‚Ø© â­",
          "ØªØ­Ø¯ÙŠ Ø¬ÙˆÙ„Ø¯: Ù‚ÙˆÙ„ Ø­Ø§Ø¬Ø© ØªØ­Ø±Ø¬ Ù†ÙØ³Ùƒ Ø¨ÙŠÙ‡Ø§ â­",
          "ØªØ­Ø¯ÙŠ Ø¬ÙˆÙ„Ø¯: Ø§Ø±ÙƒØ¶ Ù…ÙƒØ§Ù†Ùƒ 30 Ø«Ø§Ù†ÙŠØ© Ø¨Ø£Ù‚ØµÙ‰ Ø³Ø±Ø¹Ø© â­",
        ];
      }
    }, 100);
  }
  // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø© Ø¹Ù†Ø¯ 300 Ù†Ù‚Ø·Ø©
  else if (totalPoints >= 300 && currentLevel === 2) {
    setTimeout(() => {
      if (confirm("Ù…Ø¬Ù…ÙˆØ¹ Ù†Ù‚Ø§Ø· ÙƒÙ„ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙˆØµÙ„ 300! Ø¹Ø§ÙŠØ²ÙŠÙ† ØªØ¯Ø®Ù„ÙˆØ§ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ§Ù„ØªØ©ØŸ")) {
        currentLevel++;
        document.getElementById('currentLevel').textContent = `Level ${currentLevel}`;
        // ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ù†ÙŠÙˆÙ† Ø¥Ù„Ù‰ Ø¬ÙˆÙ„Ø¯
        document.querySelectorAll('.card, .player-card, .player-list-item, #currentPlayerBox, #allPlayersBox').forEach(el => {
          el.style.boxShadow = "0 0 10px gold";
          el.style.border = "2px solid gold";
        });
        // ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©
        challenges = [
          "Ø§ØªÙƒÙ„Ù… Ù‚Ø¯Ø§Ù… Ø§Ù„Ø¬Ù…ÙŠØ¹ Ø¹Ù† Ø£ÙƒØ«Ø± Ø´ÙŠØ¡ Ù…Ø­Ø±Ø¬ Ù…Ø± Ø¹Ù„ÙŠÙƒ ğŸ˜…",
          "Ø§Ø¹Ù…Ù„ ÙÙŠØ¯ÙŠÙˆ ÙˆØªÙ‚Ù„ÙŠØ¯ Ù…Ø´Ù‡ÙˆØ± ÙˆØªØ´Ø§Ø±ÙƒÙ‡ Ù…Ø¹ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ÙŠÙ† ğŸ˜‚",
          "Ø§Ø±Ù‚Øµ Ø±Ù‚ØµØ© Ù…Ø¬Ù†ÙˆÙ†Ø© ÙˆØ³Ø· Ø§Ù„ØºØ±ÙØ© ğŸ’ƒğŸ”¥",
          "Ø§ØªØµÙ„ Ø¨ØµØ¯ÙŠÙ‚ ÙˆÙ‚Ù„ Ù„Ù‡ Ø³Ø± ØºØ±ÙŠØ¨ Ø¹Ù†Ùƒ ğŸ“ğŸ¤",
          "Ù‚Ù„Ø¯ ØµÙˆØª Ø´Ø®ØµÙŠØ© ÙƒØ±ØªÙˆÙ†ÙŠØ© Ù…Ø´Ù‡ÙˆØ±Ø© ğŸ¤",
          "Ø¬Ø§ÙˆØ¨ Ø¨ÙƒÙ„ ØµØ±Ø§Ø­Ø©: Ø£ÙƒØ¨Ø± Ø®Ø·Ø£ Ø§Ø±ØªÙƒØ¨ØªÙ‡ØŸ ğŸ¤”",
          "ØºÙ†ÙŠ Ø£ØºÙ†ÙŠØ© Ø¨Ø·Ø±ÙŠÙ‚Ø© ÙƒÙˆÙ…ÙŠØ¯ÙŠØ© ØªÙ…Ø§Ù…Ø§Ù‹ ğŸ˜‚",
          "Ø§Ø­ÙƒÙŠ Ø¹Ù† Ù…ÙˆÙ‚Ù Ù…Ø­Ø±Ø¬ Ø¬Ø¯Ø§Ù‹ Ø­ØµÙ„ Ù…Ø¹Ø§Ùƒ ÙØ¬Ø£Ø© ğŸ˜³",
          "Ø§Ø¹Ù…Ù„ ØªØ­Ø¯ÙŠ Ø¨Ù‡Ù„ÙˆØ§Ù†ÙŠ ØµØ¹Ø¨ Ø£Ùˆ Ø­Ø§ÙˆÙ„ ğŸ¤¸â€â™‚ï¸",
          "Ø§ØªÙƒÙ„Ù… Ø¹Ù† Ø£ÙƒØ«Ø± Ø´Ø®Øµ ØªØ­Ø¨Ù‡ ÙÙŠ Ø­ÙŠØ§ØªÙƒ â¤ï¸",
        ];
        goldChallenges = [
          "ØªØ­Ø¯ÙŠ Ø¬ÙˆÙ„Ø¯: Ù‚ÙˆÙ„ Ø£ØµØ¹Ø¨ Ø³Ø± ÙÙŠ Ø­ÙŠØ§ØªÙƒ â­",
          "ØªØ­Ø¯ÙŠ Ø¬ÙˆÙ„Ø¯: Ø£Ø¹Ù…Ù„ ÙÙŠØ¯ÙŠÙˆ Ø¨ØªØºÙ†ÙŠ Ø£ØºÙ†ÙŠØ© Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ© â­",
          "ØªØ­Ø¯ÙŠ Ø¬ÙˆÙ„Ø¯: Ø§Ù‚Ù„Ø¯ Ù…Ø´Ù‡Ø¯ Ù…Ù† ÙÙŠÙ„Ù… Ù…Ø´Ù‡ÙˆØ± â­",
        ];
      }
    }, 100);
  }
  // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø© Ø¹Ù†Ø¯ 380 Ù†Ù‚Ø·Ø©
  else if (totalPoints >= 380 && currentLevel === 3) {
    setTimeout(() => {
      if (confirm("Ù…Ø¬Ù…ÙˆØ¹ Ù†Ù‚Ø§Ø· ÙƒÙ„ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙˆØµÙ„ 380! Ø¬Ø§Ù‡Ø²ÙŠÙ† Ù„Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø© Ø§Ù„Ù…Ø¬Ù†ÙˆÙ†Ø©ØŸ ğŸš€")) {
        currentLevel++;
        document.getElementById('currentLevel').textContent = `Level ${currentLevel}`;
        // Ø£Ù„ÙˆØ§Ù† Ù†ÙŠÙˆÙ† Ù…ØªØ­Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©
        document.querySelectorAll('.card, .player-card, .player-list-item, #currentPlayerBox, #allPlayersBox').forEach(el => {
          el.style.animation = "neonPulse 2s infinite alternate";
          el.style.border = "2px solid cyan";
          el.style.boxShadow = "0 0 20px cyan, 0 0 40px magenta, 0 0 60px yellow";
        });
        const style = document.createElement('style');
        style.innerHTML = `
          @keyframes neonPulse {
            0% {
              box-shadow: 0 0 10px cyan, 0 0 20px magenta, 0 0 30px yellow;
            }
            100% {
              box-shadow: 0 0 20px magenta, 0 0 30px yellow, 0 0 40px cyan;
            }
          }
        `;
        document.head.appendChild(style);
        // ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©
        challenges = [
          "ÙƒÙ„ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙŠØ¹Ù…Ù„ÙˆØ§ Ø±Ù‚ØµØ© Ø¬Ù…Ø§Ø¹ÙŠØ© Ù…Ø¶Ø­ÙƒØ© Ù…Ø¹Ù‹Ø§ ğŸ˜‚",
          "ÙƒÙ„ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙŠÙ‚Ù„Ø¯ÙˆØ§ Ø£ØºØ±Ø¨ Ø´Ø®ØµÙŠØ© ÙƒØ±ØªÙˆÙ†ÙŠØ© Ù…Ø¹Ù‹Ø§ ğŸ­",
          "ÙŠØ¹Ù…Ù„ÙˆØ§ ØªØ­Ø¯ÙŠ ØªÙ…Ø«ÙŠÙ„ ÙÙŠÙ„Ù… Ø£ÙƒØ´Ù† Ù…Ø¹ Ø¨Ø¹Ø¶ ğŸ¬",
          "ÙŠØºÙ†ÙˆØ§ Ø£ØºÙ†ÙŠØ© Ù…Ø´Ù‡ÙˆØ±Ø© Ø¨Ø·Ø±ÙŠÙ‚Ø© ØºØ±ÙŠØ¨Ø© Ù…Ø¹Ù‹Ø§ ğŸ¤",
          "ÙŠØ±Ø³Ù…ÙˆØ§ Ø¨Ø¹Ø¶Ù‡Ù… Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø¶Ø­ÙƒØ© ÙˆÙŠØ±ÙˆÙ‡Ø§ Ù„Ù„Ø¬Ù…ÙŠØ¹ ğŸ¨",
          "ÙŠØ¹Ù…Ù„ÙˆØ§ ØªØ­Ø¯ÙŠ Ø±ÙŠØ§Ø¶ÙŠ Ø¬Ù…Ø§Ø¹ÙŠ: 10 Ø¶ØºØ· + 10 Ù‚ÙØ²Ø§Øª ğŸ‹ï¸â€â™‚ï¸",
          "ÙƒÙ„ ÙˆØ§Ø­Ø¯ ÙŠÙ…Ø«Ù„ Ø®ÙˆÙÙ‡ Ø§Ù„Ø£ÙƒØ¨Ø± ğŸ˜±",
          "Ø¹Ù…Ù„ Ø¥Ø¹Ù„Ø§Ù† Ù…Ø¬Ù†ÙˆÙ† Ù„Ù…Ù†ØªØ¬ ÙˆÙ‡Ù…ÙŠ ğŸ¥",
          "Ø§Ù„ÙƒÙ„ ÙŠÙ‚Ù„Ø¯ Ø´Ø®ØµÙŠØ© Ù…Ø¹Ø±ÙˆÙØ© Ø¨Ø³ Ø¨Ø£Ø³Ù„ÙˆØ¨ ØºØ±ÙŠØ¨ ğŸ˜‚",
          "ÙŠØ±Ø³Ù…ÙˆØ§ Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø¹Ø§Ù„Ù… Ø¨Ø¯ÙˆÙ† Ù…Ø§ ÙŠØ´ÙˆÙÙˆØ§ ğŸ˜…",
        ];
        goldChallenges = [
          "ØªØ­Ø¯ÙŠ Ø¬ÙˆÙ„Ø¯ Ø¬Ù…Ø§Ø¹ÙŠ: ÙŠØ¹Ù…Ù„ÙˆØ§ Ù…Ø´Ù‡Ø¯ ØªÙ…Ø«ÙŠÙ„ÙŠ Ù„ÙÙŠÙ„Ù… Ø±Ø¹Ø¨ â­",
          "ØªØ­Ø¯ÙŠ Ø¬ÙˆÙ„Ø¯ Ø¬Ù…Ø§Ø¹ÙŠ: ÙŠØ­ÙƒÙˆØ§ Ù‚ØµØ© ÙˆÙ‡Ù…ÙŠØ© Ù…Ø±Ø¹Ø¨Ø© â­",
          "ØªØ­Ø¯ÙŠ Ø¬ÙˆÙ„Ø¯ Ø¬Ù…Ø§Ø¹ÙŠ: ÙŠØªØ¸Ø§Ù‡Ø±ÙˆØ§ Ø£Ù†Ù‡Ù… Ø±ÙˆØ¨ÙˆØªØ§Øª Ù„Ù…Ø¯Ø© Ø¯Ù‚ÙŠÙ‚Ø© â­",
        ];
      }
    }, 100);
  }
  // Ø¨Ø¹Ø¯ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø© Ø¹Ù†Ø¯ 500 Ù†Ù‚Ø·Ø©: Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ø§Ù„Ù†Ù‡Ø§ÙŠØ©
  else if (totalPoints >= 500 && currentLevel === 4) {
    document.getElementById('finishGameBtn').classList.remove('hidden');
    setTimeout(() => {
      document.getElementById('finishGameBtn').classList.add('hidden');
      showFinalGroupChallenge();
    }, 45000); // Ø¨Ø¹Ø¯ 45 Ø«Ø§Ù†ÙŠØ©
  }
}

// ---------- Handlers for Game Finish ----------
/**
 * ØªØ­Ø±ÙŠÙƒ Ø²Ø±Ø§Ø± Ø§Ù„Ù†Ù‡Ø§ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø¨ Ù…Ù†Ù‡
 */
function moveFinishButton() {
  const button = document.getElementById('finishGameBtn');
  const randomTop = Math.random() * 80;
  const randomLeft = Math.random() * 80;
  button.style.transform = "scale(0.7)";
  button.style.position = "fixed";
  button.style.top = `${randomTop}%`;
  button.style.left = `${randomLeft}%`;
  setTimeout(() => {
    button.style.transform = "scale(1)";
  }, 500);
}

/**
 * Ø¹Ø±Ø¶ Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ ÙˆØ²ÙŠØ§Ø¯Ø© Ø§Ù„Ù†Ù‚Ø§Ø·
 */
function showFinalGroupChallenge() {
  const challenge = "ğŸ’¥ ØªØ­Ø¯ÙŠ Ù†Ù‡Ø§Ø¦ÙŠ Ø¬Ù…Ø§Ø¹ÙŠ: ÙƒÙ„ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙ…Ø«Ù„ÙˆØ§ Ù…Ø¹Ù‹Ø§ Ù…Ø´Ù‡Ø¯ Ø¯Ø±Ø§Ù…ÙŠ Ø­Ø²ÙŠÙ† Ù„Ù…Ø¯Ø© Ø¯Ù‚ÙŠÙ‚Ø© ÙƒØ§Ù…Ù„Ø© Ù…Ø¹ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø´Ø§Ø¹Ø± Ø­Ù‚ÙŠÙ‚ÙŠØ©! ğŸ’¥";
  document.getElementById('challengeCard').innerText = challenge;
  players.forEach(player => {
    player.points += 50;
  });
  updatePlayers();
  updateAllPlayersList();
  updateMainPoints();
  setTimeout(() => {
    showWinners();
  }, 10000);
}

/**
 * Ø¹Ø±Ø¶ Ø§Ù„ÙØ§Ø¦Ø²ÙŠÙ† Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠÙŠÙ† ÙˆØªØ®Ø²ÙŠÙ†Ù‡Ù… ÙÙŠ localStorage
 */
function showWinners() {
  players.sort((a, b) => b.points - a.points);
  const topThree = players.slice(0, 3);
  let winnersText = "ğŸ† Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© ğŸ†\n";
  topThree.forEach((player, index) => {
    winnersText += `${index + 1}. ${player.name} - ${player.points} Ù†Ù‚Ø§Ø·\n`;
  });
  alert(winnersText);
  localStorage.setItem('weeklyChampion', topThree[0].name);
  localStorage.setItem('weeklyPoints', topThree[0].points);
  setTimeout(() => {
    window.location.href = "hall-of-fame.html";
  }, 3000);
}
    // Ø§Ø¶ØºØ· Enter Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù„Ø§Ø¹Ø¨
    document.getElementById('playerNameInput').addEventListener('keydown', function(event) {
      if (event.key === "Enter") {
        event.preventDefault(); // ÙŠÙ…Ù†Ø¹ Ø£ÙŠ Ø±ÙŠÙØ±ÙŠØ´ Ù„Ù„ØµÙØ­Ø©
        addPlayer();
      }
    });
    // ØªØ­ÙƒÙ… Ø¨Ø§Ù„ÙƒÙŠØ¨ÙˆØ±Ø¯ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø©
document.addEventListener('keydown', function(event) {
  if (document.getElementById('gameSection').classList.contains('hidden')) return; // Ù„Ùˆ Ù„Ø³Ù‡ ÙÙŠ Ø´Ø§Ø´Ø© Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†

  const key = event.key.toLowerCase();

  if (event.key === 'Enter') {
    if (!document.getElementById('nextChallengeBtn').classList.contains('hidden')) {
      document.getElementById('nextChallengeBtn').click();
    } else if (!document.getElementById('completeChallengeBtn').classList.contains('hidden')) {
      document.getElementById('completeChallengeBtn').click();
    }
  }

  if (key === 'w' && !document.getElementById('skipChallengeBtn').classList.contains('hidden')) {
    document.getElementById('skipChallengeBtn').click();
  }

  if (key === 'q' && !document.getElementById('punishmentBtn').classList.contains('hidden')) {
    if (players[currentPlayerIndex].points >= 5) {
      document.getElementById('punishmentBtn').click();
    } else {
      alert("âŒ Ù„Ø§Ø²Ù… ÙŠÙƒÙˆÙ† Ù…Ø¹Ø§Ùƒ 5 Ù†Ù‚Ø§Ø· Ø¹Ù„Ø´Ø§Ù† ØªØ®ØªØ§Ø± Ø§Ù„Ø¹Ù‚Ø§Ø¨!");
    }
  }
});

  let currentTheme = 'dark';

  function toggleTheme() {
    const body = document.body;
    const navbar = document.querySelector('.navbar');
    const buttons = document.querySelectorAll('button');
    const cards = document.querySelectorAll('.card');
    
    if (currentTheme === 'dark') {
      // Light Mode
      body.style.background = 'linear-gradient(135deg, #ffffff, #f0f0f0)';
      body.style.color = '#000';
      navbar.style.background = '#e0e0e0';
      buttons.forEach(btn => {
        btn.style.background = '#fff';
        btn.style.color = '#000';
        btn.style.border = '2px solid #ddd';
      });
      cards.forEach(card => {
        card.style.background = '#f9f9f9';
        card.style.color = '#000';
        card.style.boxShadow = '0 0 10px #ccc';
      });
      currentTheme = 'light';
    } else if (currentTheme === 'light') {
      // Pink Mode
      body.style.background = 'linear-gradient(135deg, #ff69b4, #ff1493)';
      body.style.color = '#000';
      navbar.style.background = '#ff85c0';
      buttons.forEach(btn => {
        btn.style.background = '#ffe4e1';
        btn.style.color = '#000';
        btn.style.border = '2px solid #ff85c0';
      });
      cards.forEach(card => {
        card.style.background = '#ffd1dc';
        card.style.color = '#000';
        card.style.boxShadow = '0 0 10px #ff85c0';
      });
      currentTheme = 'pink';
    } else {
      // Dark Mode
      body.style.background = 'linear-gradient(135deg, #0f0f0f, #1a1a1a)';
      body.style.color = '#fff';
      navbar.style.background = '#111';
      buttons.forEach(btn => {
        btn.style.background = 'transparent';
        btn.style.color = '#0ff';
        btn.style.border = '2px solid #0ff';
      });
      cards.forEach(card => {
        card.style.background = '#222';
        card.style.color = '#fff';
        card.style.boxShadow = '0 0 10px #0ff';
      });
      currentTheme = 'dark';
    }
  }


function toggleMusic() {
  const music = document.getElementById('bgMusic');
  const btn = document.getElementById('musicBtn');
  if (music.paused) {
    music.play();
    btn.textContent = "ğŸµ Music On";
  } else {
    music.pause();
    btn.textContent = "ğŸ”‡ Music Off";
  }
}

function changeLanguage() {
  const lang = document.getElementById('languageSelect').value;
  if (lang === 'ar') {
    document.body.dir = 'rtl';
    document.title = "Ù„Ø¹Ø¨Ø© ØªØ­Ø¯ÙŠØ§Øª ÙŠÙˆØ³Ù";
    updateButtonLabels({
      addPlayer: "Ø£Ø¶Ù Ù„Ø§Ø¹Ø¨",
      startGame: "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©",
      nextChallenge: "Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„ØªØ§Ù„ÙŠ",
      completeChallenge: "Ø£Ù†Ø¬Ø²ØªÙ‡!",
      skipChallenge: "ØªØ®Ø·ÙŠ (-50 Ù†Ù‚Ø·Ø©)",
      punishment: "ğŸ˜ˆ Ø¹Ù‚Ø§Ø¨ (-5 Ù†Ù‚Ø§Ø·)",
      theme: "ØªØºÙŠÙŠØ± Ø§Ù„Ù†Ù…Ø·",
      exit: "Ø®Ø±ÙˆØ¬"
    });
  } else if (lang === 'de') {
    document.body.dir = 'ltr';
    document.title = "Youssef Herausforderung Spiel";
    updateButtonLabels({
      addPlayer: "Spieler hinzufÃ¼gen",
      startGame: "Spiel starten",
      nextChallenge: "NÃ¤chste Herausforderung",
      completeChallenge: "Ich habe es geschafft!",
      skipChallenge: "Ãœberspringen (-50 Punkte)",
      punishment: "ğŸ˜ˆ Strafe (-5 Punkte)",
      theme: "Thema Ã¤ndern",
      exit: "Beenden"
    });
  } else if (lang === 'es') {
    document.body.dir = 'ltr';
    document.title = "Juego de DesafÃ­o de Youssef";
    updateButtonLabels({
      addPlayer: "Agregar jugador",
      startGame: "Iniciar juego",
      nextChallenge: "Siguiente desafÃ­o",
      completeChallenge: "Â¡Lo completÃ©!",
      skipChallenge: "Saltar (-50 puntos)",
      punishment: "ğŸ˜ˆ Castigo (-5 puntos)",
      theme: "Cambiar tema",
      exit: "Salir"
    });
  } else {
    document.body.dir = 'ltr';
    document.title = "Youssef Challenge Game";
    updateButtonLabels({
      addPlayer: "Add Player",
      startGame: "Start Game",
      nextChallenge: "Next Challenge",
      completeChallenge: "I Completed It!",
      skipChallenge: "Skip (-50 Points)",
      punishment: "ğŸ˜ˆ Punishment (-5 Points)",
      theme: "Theme",
      exit: "Exit"
    });
  }
}

function updateButtonLabels(labels) {
  document.querySelector('button[onclick*="addPlayer"]').innerText = labels.addPlayer;
  document.querySelector('button[onclick*="startGame"]').innerText = labels.startGame;
  document.getElementById('nextChallengeBtn').innerText = labels.nextChallenge;
  document.getElementById('completeChallengeBtn').innerText = labels.completeChallenge;
  document.getElementById('skipChallengeBtn').innerText = labels.skipChallenge;
  document.getElementById('punishmentBtn').innerText = labels.punishment;
  document.querySelector('button[onclick*="toggleTheme"]').innerText = labels.theme;
  document.querySelector('button[onclick*="toggleMusic"]').innerText = labels.music;
  document.querySelector('button[onclick*="exitGame"]').innerText = labels.exit;
}
function toggleMusic() {
  const music = document.getElementById('bgMusic');
  const btn = document.getElementById('musicBtn');
  if (music.paused) {
    music.play();
    btn.textContent = "ğŸ”Š Music On";
  } else {
    music.pause();
    btn.textContent = "ğŸ”‡ Music Off";
  }
}
function exitGame() {
  if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©ØŸ")) {
    window.location.href = "index.html"; // Ù‚Ù… Ø¨ØªØºÙŠÙŠØ± "index.html" Ø¥Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„ØµÙØ­Ø© Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø¥Ù„ÙŠÙ‡Ø§
  }
}


function playClickSound() {
  const click = document.getElementById('clickSound');
  click.currentTime = 0; // Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
  click.play();
}
document.getElementById('gameBtn').style.display = 'none';

// Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø²Ø± Ø¨Ø¹Ø¯ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†
function showGameButton() {
  document.getElementById('gameBtn').style.display = 'block';
}

    </script>
    </body>
    </html>